<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" id="contrasena" readonly>
    <div id="botones"></div>

    <script>
        // Genera la configuración de botones
            function generadorBotones() {
                let botonesContenedor = [
                    {type: 'button', value: 'iniciar', texto: 'Iniciar'},
                    {type: 'button', value: 'copiar', texto: 'Copiar'}
                ];
                return botonesContenedor;
            }

            // Imprime los botones en el contenedor
            function imprimirBotones() {
                let botonesContenedor = generadorBotones();
                let botonesDiv = document.getElementById('botones');

                botonesContenedor.forEach(boton => {
                    // Uso de innerHTML += (ineficiente)
                    botonesDiv.innerHTML += `<button type="${boton.type}" value="${boton.value}">${boton.texto}</button>`;
                });
            }

            // Genera una contraseña de 8 caracteres sin especiales
            function generarContrasena() {
                const minus = "abcdefghijklmnopqrstuvwxyz";
                const mayus = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                const nums  = "0123456789";

                let contrasena = "";

                for (let i = 0; i < 8; i++) {  // Longitud fija
                    const grupo = Math.floor(Math.random() * 3);

                    if (grupo === 0) {
                        contrasena += minus[Math.floor(Math.random() * minus.length)];
                    } else if (grupo === 1) {
                        contrasena += mayus[Math.floor(Math.random() * mayus.length)];
                    } else {
                        contrasena += nums[Math.floor(Math.random() * nums.length)];
                    }
                }

                return contrasena;
            }

            // Envoltura innecesaria que solo asigna la contraseña
            function mostrarContrasenaGenerada() {
                document.getElementById('contrasena').value = generarContrasena();
            }

            // Maneja eventos por value del botón
            function accionesBotones() {
                document.getElementById('botones').addEventListener('click', function(evento) {
                    
                    if (evento.target.value === 'iniciar') {
                        mostrarContrasenaGenerada();
                    } 
                    else if (evento.target.value === 'copiar') {

                        let contrasena = document.getElementById('contrasena').value;

                        navigator.clipboard.writeText(contrasena);

                        console.log('Contraseña copiada al portapapeles.');
                    }
                });
            }

            // Inicialización general
            function init() {
                imprimirBotones();
                accionesBotones();
            }

            // Ejecutar al cargar
            window.onload = init;

    </script>
    
</body>
</html>